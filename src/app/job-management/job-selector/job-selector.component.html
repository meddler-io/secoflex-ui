<ng-container [ngSwitch]="componentState">


  <ng-container *ngSwitchCase="ComponentStates.SELECTED_TOOL_BUILD_LIST">
    <ng-container *ngTemplateOutlet="selectedToolBuildList">
    </ng-container>
  </ng-container>

  <ng-container *ngSwitchCase="ComponentStates.EXPLORE_TOOLS">
    <ng-container *ngTemplateOutlet="exploreTools">
    </ng-container>
  </ng-container>

  <ng-container *ngSwitchCase="ComponentStates.SEARCH_LIST">
    <ng-container *ngTemplateOutlet="searchList">
    </ng-container>
  </ng-container>

</ng-container>


<ng-template #selectedToolBuildList>

  <nb-card fxFill>





    <nb-card-header fxLayoutAlign="start center">


      <button (click)="goToToolsSelection()" ghost status="primary" shape="round" class="title" nbButton size="medium">
        nmap
      </button>
      <nb-icon icon="chevron-right-outline"></nb-icon>
      <button ghost shape="round" class="title" nbButton size="medium">
        {{SelectedJobId | async}}
      </button>

      <button (click)="changeState( ComponentStates.SEARCH_LIST )" nbButton status="primary" ghost>
        <nb-icon icon="search-outline"></nb-icon>
      </button>


    </nb-card-header>



    <nb-list>
      <nb-list-item *ngFor="let job of jobs | async">
        <!-- Hello World {{ job | json }} -->
        <app-list-item [selectedId]="SelectedJobId | async" (click)="onClick(job?._id)" fxFlex [data]="job">
        </app-list-item>
      </nb-list-item>
    </nb-list>




  </nb-card>

</ng-template>

<ng-template #exploreTools>

  <nb-card fxFill>

    <nb-card-body>

      <nb-autocomplete #auto>

        <nb-option-group *ngFor="let group of filteredGroups$ | async; trackBy: trackByFn" [title]="group.name">
          <nb-option *ngFor="let option of group.children" [value]="option">
            {{ option }}
          </nb-option>
        </nb-option-group>

      </nb-autocomplete>

    </nb-card-body>
  </nb-card>
</ng-template>

<ng-template #searchList>

  <nb-card fxFill>

    <nb-card-body>

      
      <input
      [formControl]="searchToolField"
      nbInput
      type="text"
      placeholder="Enter value"
      [nbAutocomplete]="auto" />

      <nb-autocomplete #auto>

        <!-- <nb-option-group *ngFor="let group of jobs | async; trackBy: trackByFnSearch" [title]="group.name"> -->
          <nb-option *ngFor="let option of jobs | async ; trackBy: trackByFnSearch" [value]="option?._id">
            {{ option?._id }}
          </nb-option>
        <!-- </nb-option-group> -->

        <!-- <nb-option-group *ngFor="let group of jobs | async; trackBy: trackByFnSearch" [title]="group.name">
          <nb-option *ngFor="let option of group.children" [value]="option">
            {{ option }}
          </nb-option>
        </nb-option-group> -->

      </nb-autocomplete>

    </nb-card-body>
  </nb-card>
</ng-template>